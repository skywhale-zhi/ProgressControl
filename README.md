# ProgressControl
## 一个自动化的泰拉瑞亚插件，基于tshock

## 功能介绍

### 1.能够自动重置地图
可设置重置地图的大小、模式、种子、名称、地图存放目录、等功能

### 2.能自动重启地图
可按照当前的端口，地图数据来重启泰拉瑞亚服务器

### 3.能自动执行指令
自动执行你要设定的指令，支持原版和其他插件的

### 4.自动解锁Boss来控制进度
按时间来对boss进行封禁，时间未到不可打boss，boss会自动消失

## 指令
- 权限1：`pco.use`
- 指令1-1：`/pco help`
- 功能1-1：查看这个插件下的所有帮助指令
-
- 指令1-2：`/pco view`
- 功能1-2：查看当前服务器上的所有自动化计划（简易版）
-
- 权限2：`pco.admin`
- 指令2-1：`/pco now`
- 功能2-1：来将开服日期、上次重启日期和上次自动执行指令日期调整到现在
-	  
- 指令2-2：`/pco autoboss`
- 功能2-2：自动控制Boss进度计划启用，再次使用则关闭
-	  
- 指令2-3：`/pco offset autoboss [+-num]`
- 功能2-3：来将自动控制Boss的解锁时刻推迟或提前num小时，num可为小数
-	  
- 指令2-4：`/pco autocom`
- 功能2-4：自动执行指令计划启用，再次使用关闭
-	  
- 指令2-5：`/pco offset autocom [+-num]`
- 功能2-5：将自动执行指令的时间推迟或提前num小时，num可为小数
-	  
- 指令2-6：`/pco com [+-num]`
- 功能2-6：手动执行指令计划启用，在num秒后开始执行，若num不填则立刻执行，num小于0则关闭当前存在的手动计划，其优先级大于自动执行指令
-	  
- 指令2-7：`/pco com或autocom add [xxxx]`
- 功能2-7：来添加一个自动执行的指令
-
- 指令2-8：`/pco com或autocom del [xxxx]`
- 功能2-8：来删除一个自动执行的指令
-
- 指令2-9：`/supco help`
- 功能2-9：来查看高级自动控制指令
-
- 权限3：`pco.superadmin`
- 指令3-1：`/supco autoreset`
- 功能3-1：自动重置世界计划启用，再次使用关闭
-
- 指令3-2：`/supco offset autoreset [±num]`
- 功能3-2：将自动重置世界的时间推迟或提前num小时，num可为小数
-
- 指令3-3：`/supco autoreload`
- 功能3-3：自动重启服务器计划启用，再次使用关闭
-
- 指令3-4：`/supco offset autoreload [±num]`
- 功能3-4：将自动重启服务器的时间推迟或提前num小时，num可为小数
-
- 指令3-5：`/supco name [string]`
- 功能3-5：来设置下次重置地图时的地图名字
-
- 指令3-6：`/supco size [小1/中2/大3 (只能填数字)]`
- 功能3-6：来设置下次重置时地图的大小
-
- 指令3-7：`/supco mode [普通0/专家1/大师2/旅途3(只能填数字)]`
- 功能3-7：来设置下次重置地图时的模式
-
- 指令3-8：`/supco seed [string]`
- 功能3-8：来设置下次重置地图时的地图种子
-
- 指令3-9：`/supco maxplayers [num]`
- 功能3-9：来设置下次重置地图时的最多在线玩家
-
- 指令3-10：`/supco resetplayers [0/1]`
- 功能3-10：来设置下次重置地图时是否清理玩家数据，0代表不清理
-
- 指令3-11：`/supco port [num]`
- 功能3-11：来设置下次重置地图时的端口
-
- 指令3-12：`/supco view`
- 功能3-12：来查看当前服务器的自动化计划
-
- 指令3-13：`/supco reset [±num]`
- 功能3-13：手动重置世界计划启用，在num秒后开始重置，若num不填则立刻重置，num小于0则关闭当前存在的手动计划，其优先级大于自动重置
-
- 指令3-14：`/supco reload [±num]`
- 功能3-14：手动重启服务器计划启用，在num秒后开始重启，若num不填则立刻重启，num小于0则关闭当前存在的手动计划，其优先级大于自动重启
-
- 指令3-15：`/supco stop [r/d/c/all或不填]`
- 功能3-15：来分别终止reset/reload/com的全部手动计划，填all或不填时终止全部，自动计划不受影响

## 详述
插件里的有自动计划和手动计划，自动计划就是依赖配置文件中，每隔一段时间执行一次。如自动重启计划，自动重置计划，自动控制Boss解锁时间计划，自动执行指令的计划
手动计划就是用户使用指令产生一个，该计划只生效一次，手动计划指令会覆盖自动计划

## 配置文件 ProgressControl.json
```
{
  "开服日期": "2023-07-20T06:04:24.9417951+08:00",
  "是否启用自动重置世界": false,
  "多少小时后开始自动重置世界": 48.0,
  "自动重置是否重置玩家数据": true,
  "自动重置前执行的指令_不需要加斜杠": [ //这里是两个例子
    "playing",
    "help"
  ],
  "自动重置前删除哪些数据库表": [],
  "自动重置前是否删除日志": false,
  "自动重置前是否删除地图": true,
  "自动重置的地图大小_小1_中2_大3": 2,
  "自动重置的地图难度_普通0_专家1_大师2_旅途3": 2,
  "自动重置的地图种子": "",
  "自动重置的地图名称": "幸运方块",
  "自动重置的最多在线人数": 16,
  "自动重置的端口": "7776",
  "地图存放目录_不填时默认原目录_注意请使用除号分隔目录": "",
  "上次重启服务器的日期": "2023-07-21T19:37:36.3303958+08:00",
  "是否启用自动重启服务器": false,
  "多少小时后开始自动重启服务器": 3604.0,
  "自动重启的参数设置": "这是一条提示信息。自动重启的端口会沿用重启前的；最大玩家数目、密码将按照config.json来配置",
  "自动重启前执行的指令_不需要加斜杠": [],
  "是否自动控制Boss进度": false,
  "Boss封禁时长距开服日期_单位小时": {
    "史莱姆王": 0.0,
    "克苏鲁之眼": 5.0,
    "世界吞噬者": 24.0,
    "克苏鲁之脑": 24.0,
    "蜂后": 48.0,
    "巨鹿": 48.0,
    "骷髅王": 49.0,
    "血肉墙": 72.0,
    "史莱姆皇后": 73.0,
    "双子魔眼": 96.0,
    "毁灭者": 97.0,
    "机械骷髅王": 98.0,
    "世纪之花": 120.0,
    "石巨人": 144.0,
    "猪龙鱼公爵": 145.0,
    "光之女皇": 146.0,
    "拜月教教徒": 168.0,
    "四柱": 168.0,
    "月亮领主": 174.0
  },
  "上次自动执行指令的日期": "2023-07-21T19:38:41.7904607+08:00",
  "是否启用自动执行指令": false,
  "多少小时后开始自动执行指令": 4.0,
  "自动执行的指令_不需要加斜杠": [
    "playing",
    "help"
  ]
}
```